<!doctype html><html lang=es-es><head><title>| Jesús Millán</title><meta charset=utf-8><meta name=language content="en"><meta name=description content><meta name=keywords content><meta name=viewport content="width=device-width,initial-scale=1"><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=twitter:card content="summary"><meta name=twitter:title content><meta name=twitter:description content><meta name=twitter:site content="@jmillandev"><meta name=twitter:creator content="https://twitter.com/jmillandev"><link rel="shortcut icon" type=image/png href=/favicon.ico><link type=text/css rel=stylesheet href=/jmillandev.github.io/css/post.min.2cb93c91050d1853bf971cc31e00122edd6e0f405aa1de3b7f8ef67ea3b5a79a.css integrity="sha256-LLk8kQUNGFO/lxzDHgASLt1uD0Baod47f472fqO1p5o="><link type=text/css rel=stylesheet href=/jmillandev.github.io/css/custom.min.e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855.css integrity="sha256-47DEQpj8HBSa+/TImW+5JCeuQeRkm5NMpJWZG3hSuFU="><script type=application/ld+json>{"@context":"http://schema.org","@type":"WebSite","url":"https:\/\/\/jmillandev.github.io\/apuntes\/api-rest\/","name":"","author":{"@type":"Person","name":""},"description":""}</script></head><body><div class=burger__container><div class=burger aria-controls=navigation aria-label=Menu><div class="burger__meat burger__meat--1"></div><div class="burger__meat burger__meat--2"></div><div class="burger__meat burger__meat--3"></div></div></div><nav class=nav id=navigation><ul class=nav__list><li><a href=/jmillandev.github.io/>About</a></li><li><a class=active href=/jmillandev.github.io/apuntes/>Apuntes</a></li><li><a href=/jmillandev.github.io/blog/>Blog</a></li></ul></nav><main><style>@media(min-width:1024px){.post{width:85%;margin:0 auto;max-width:100%}}</style><div class=flex-wrapper><div class=post__container><div class=post><header class=post__header><h1 id=post__title></h1></header><article class=post__content><h1 id=conceptos-basico-para-manejar-un-api>Conceptos Basico para manejar un API</h1><h2 id=http>HTTP<a class=anchor href=#http>#</a></h2><p>HTTP son las siglas de Hypertext Transfer Protocol o protocolo de transferencia de hipertexto, es el conjunto de reglas en las que se van a comunicar dos entidades, en este caso dos computadoras.</p><h2 id=rest>REST<a class=anchor href=#rest>#</a></h2><p>Es un acrónimo de Representational State Transfer o transferencia de estado representacional, le agrega una capa muy delgada de complejidad y abstracción a HTTP. Mientras que HTTP es transferencia de archivos, REST se basa en la transferencia de recursos.</p><h2 id=api-restful>API RESTful<a class=anchor href=#api-restful>#</a></h2><p>Es una API diseñada con los conceptos de REST:</p><ul><li>Recurso: todo dentro de una API RESTful debe ser un recurso.</li><li>URI: los recursos en REST siempre se manipulan a partir de la URI, identificadores universales de recursos.</li><li>Acción: todas las peticiones a tu API RESTful deben estar asociadas a uno de los verbos de HTTP: <em>GET</em> para obtener un recurso, <em>POST</em> para escribir un recurso, <em>PUT</em> para modificar un recurso y <em>DELETE</em> para borrarlo.</li></ul><p>REST es muy útil cuando:</p><ul><li>Las interacciones son simples.</li><li>Los recursos de tu hardware son limitados.</li></ul><p>**NOTA:**No conviene cuando las interacciones son muy complejas.</p><h1 id=consumir-servicio-get>Consumir servicio (GET)</h1><p>Consumir un API es tan sencillo como consultar su URL. Para este caso vamos a utilizar la linea de comandos.</p><p>Utilizando el comando ‘curl’ dentro de nuestra terminal podemos realizar peticiones a cualquier sitio web, por ejemplo una API como la de xkcd.</p><p><code>curl https://xkcd.com/info.0.json</code></p><p>El anterior comando nos regresa información del API, pero de manera poco legible. para poder verlo de manera más ordenada podemos un pequete o lenguaje para JSON, en este caso &lsquo;jq&rsquo;:</p><p><code>curl https://xkcd.com/info.0.json | jq</code></p><h1 id=exponer-datos>Exponer Datos</h1><p>En el caso de que recibamos una peticion de tipo <strong>GET</strong>/<strong>POST</strong>/<strong>DELETE</strong>/<strong>UPDATE</strong> debemos realizar la logica de negocio y devolver un archivo tipo JSON(si es necesario).
Es una buena practica mandar en el HEADER de la respuesta el &lsquo;Content-Type : application/json&rsquo;</p><h1 id=restriccion-de-acceso-autentificaciones>Restriccion de acceso (Autentificaciones)</h1><h2 id=via-http>Via HTTP<a class=anchor href=#via-http>#</a></h2><p>Se hace por medio de la super global SERVER del servidor, lo cual es poco recomendado. Dado a que la autenticación vía HTTP tiene dos problemas:</p><ul><li><p><strong>Es poco segura</strong>: las credenciales se envían en cada request anteponiendo el usuario y contraseña en la url, por ejemplo: user:password@platzi.com.</p></li><li><p><strong>Es ineficiente</strong>: la autenticación se debe realizar en cada request.</p></li></ul><h2 id=via-hmac>Via HMAC<a class=anchor href=#via-hmac>#</a></h2><p>Es un codigo de autentificacion basado en HASH de mensajes. Para esta autenticación necesitamos 3 elementos:</p><ul><li>Función Hash: Difícil de romper, que sea conocida por el cliente y servidor.</li><li>Clave secreta: Solamente la pueden saber el cliente y el servidor, será utilizada para corroborar el hash.</li><li>UID: El id del usuario, será utilizado dentro de la función hash junto con la clave secreta y un timestamp.</li></ul><p>Es mucho más segura que la autenticación vía HTTP, por ello la información que se envía a través de este método no es muy sensible.</p><h1 id=via-access-tokens-accesos-temporales>Via Access Tokens (Accesos temporales)</h1><p>Está forma es la más compleja de todas, pero también es la forma más segura utilizada para información muy sensible. El servidor al que le van a hacer las consultas se va a partir en dos:</p><ul><li>Uno se va a encargar específicamente de la autenticación.</li><li>El otro se va a encargar de desplegar los recursos de la API.</li></ul><p>El flujo de la petición es la siguiente:</p><ol><li>Nuestro usuario hace una petición al servidor de autenticación para pedir un token.</li><li>El servidor le devuelve el token y almacena este en una base de datos temporal.</li><li>El usuario hace una petición al servidor para pedir recursos de la API.</li><li>El servidor con los recursos hace una petición al servidor de autenticación para verificar que el token sea válido(este en la base de datos).</li><li>Una vez verificado el token, el servidor le devuelve los recursos al cliente.</li></ol><p><strong>NOTA:</strong> El token es temporanl, tiene caducidad en el tiempo.</p><h1 id=buenas-practicas>Buenas Practicas</h1><ul><li>Siempre utiliza <strong>sustantivos</strong> para nombrar tus <strong>recursos</strong>(casa, libro, auto, ect).</li><li>Añade los <strong>nombres</strong> en <strong>plural</strong> para las <strong>urls</strong> (<a href=https://misitio.com/serviciosbancarios/v1/transferencias/,>https://misitio.com/serviciosbancarios/v1/transferencias/,</a> <a href=https://misitio.com/serviciosbancarios/v1/pagoprovedores/,>https://misitio.com/serviciosbancarios/v1/pagoprovedores/,</a> <a href=https://misitio.com/serviciosbancarios/v1/nominas/,>https://misitio.com/serviciosbancarios/v1/nominas/,</a> etc).</li><li>Las modificaciones a recursos deben hacerse con su verbo HTTP correspondiente: POST, PUT o DELETE.</li><li>Para devolver recursos asociados a otro recurso utiliza url que incorporen subrecursos: /Autos/1/Choferes.</li><li>Navegabilidad vía vínculos.</li><li>Cuando devuelvas colecciones los pedidos deben ser filtrables, ordenables y paginables.</li><li>Versiona tu API, añade el número de versión en la url: v1/Autos.</li></ul></article><div class=pagination><a class=pagination__item href=https:///jmillandev.github.io/apuntes/bases_de_datos/><span class=pagination__label>Previous Post</span>
<span class=pagination__title></span></a></div><div id=disqus_thread></div><script type=application/javascript>var disqus_config=function(){};(function(){if(["localhost","127.0.0.1"].indexOf(window.location.hostname)!=-1){document.getElementById('disqus_thread').innerHTML='Disqus comments not available by default when the website is previewed locally.';return;}
var d=document,s=d.createElement('script');s.async=true;s.src='//'+"jmillandev"+'.disqus.com/embed.js';s.setAttribute('data-timestamp',+new Date());(d.head||d.body).appendChild(s);})();</script><noscript>Please enable JavaScript to view the <a href=https://disqus.com/?ref_noscript>comments powered by Disqus.</a></noscript><a href=https://disqus.com class=dsq-brlink>comments powered by <span class=logo-disqus>Disqus</span></a><footer class=post__footer><div class=social-icons><a class=social-icons__link title=Twitter href=https://twitter.com/jmillandev target=_blank rel=noopener><div class=social-icons__icon style=background-image:url(https:///jmillandev.github.io/svg/twitter.svg)></div></a><a class=social-icons__link title=GitHub href=https://github.com/jmillandev target=_blank rel=noopener><div class=social-icons__icon style=background-image:url(https:///jmillandev.github.io/svg/github.svg)></div></a><a class=social-icons__link title=LinkedIn href=https://www.linkedin.com/in/jmillandev-42664412a/ target=_blank rel=noopener><div class=social-icons__icon style=background-image:url(https:///jmillandev.github.io/svg/linkedin.svg)></div></a></div><p>© 2022</p></footer></div></div></div></main><script src=/jmillandev.github.io/js/index.min.49e4d8a384357d9b445b87371863419937ede9fa77737522ffb633073aebfa44.js integrity="sha256-SeTYo4Q1fZtEW4c3GGNBmTft6fp3c3Ui/7YzBzrr+kQ=" crossorigin=anonymous></script><script src=https://unpkg.com/prismjs@1.20.0/components/prism-core.min.js></script><script src=https://unpkg.com/prismjs@1.20.0/plugins/autoloader/prism-autoloader.min.js data-autoloader-path=https://unpkg.com/prismjs@1.20.0/components/></script></body></html>